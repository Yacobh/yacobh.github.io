{
"version":3,
"file":"module$node_modules$$supabase$realtime_js$dist$module$RealtimeClient.js",
"lineCount":255,
"mappings":"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",
"sources":["node_modules/@supabase/realtime-js/dist/module/RealtimeClient.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$supabase$realtime_js$dist$module$RealtimeClient\"] = function(global,require,module,exports) {\nObject.defineProperties(exports, {__esModule:{enumerable:true, value:true}, default:{enumerable:true, get:function() {\n  return RealtimeClient;\n}}});\nvar require$_DOT__SLASH_WebSocket = require(\"./WebSocket\");\nvar require$_DOT__SLASH_lib_SLASH_constants = require(\"./lib/constants\");\nvar require$_DOT__SLASH_lib_SLASH_serializer = require(\"./lib/serializer\");\nvar require$_DOT__SLASH_lib_SLASH_timer = require(\"./lib/timer\");\nvar require$_DOT__SLASH_lib_SLASH_transformers = require(\"./lib/transformers\");\nvar require$_DOT__SLASH_RealtimeChannel = require(\"./RealtimeChannel\");\nvar default$$require$_DOT__SLASH_lib_SLASH_serializer = require.esmDefault(require$_DOT__SLASH_lib_SLASH_serializer);\nvar default$$require$_DOT__SLASH_lib_SLASH_timer = require.esmDefault(require$_DOT__SLASH_lib_SLASH_timer);\nvar default$$require$_DOT__SLASH_WebSocket = require.esmDefault(require$_DOT__SLASH_WebSocket);\nvar default$$require$_DOT__SLASH_RealtimeChannel = require.esmDefault(require$_DOT__SLASH_RealtimeChannel);\nconst noop = () => {\n};\nconst WORKER_SCRIPT = `\n  addEventListener(\"message\", (e) => {\n    if (e.data.event === \"start\") {\n      setInterval(() => postMessage({ event: \"keepAlive\" }), e.data.interval);\n    }\n  });`;\nclass RealtimeClient {\n  constructor(endPoint, options) {\n    var _a;\n    this.accessTokenValue = null;\n    this.apiKey = null;\n    this.channels = new Array();\n    this.endPoint = \"\";\n    this.httpEndpoint = \"\";\n    this.headers = require$_DOT__SLASH_lib_SLASH_constants.DEFAULT_HEADERS;\n    this.params = {};\n    this.timeout = require$_DOT__SLASH_lib_SLASH_constants.DEFAULT_TIMEOUT;\n    this.heartbeatIntervalMs = 25000;\n    this.heartbeatTimer = undefined;\n    this.pendingHeartbeatRef = null;\n    this.heartbeatCallback = noop;\n    this.ref = 0;\n    this.logger = noop;\n    this.conn = null;\n    this.sendBuffer = [];\n    this.serializer = new default$$require$_DOT__SLASH_lib_SLASH_serializer.default();\n    this.stateChangeCallbacks = {open:[], close:[], error:[], message:[],};\n    this.accessToken = null;\n    this._resolveFetch = customFetch => {\n      let _fetch;\n      if (customFetch) {\n        _fetch = customFetch;\n      } else if (typeof fetch === \"undefined\") {\n        _fetch = (...args) => import(\"@supabase/node-fetch\").then(({default:fetch}) => fetch(...args));\n      } else {\n        _fetch = fetch;\n      }\n      return (...args) => _fetch(...args);\n    };\n    this.endPoint = `${endPoint}/${require$_DOT__SLASH_lib_SLASH_constants.TRANSPORTS.websocket}`;\n    this.httpEndpoint = (0,require$_DOT__SLASH_lib_SLASH_transformers.httpEndpointURL)(endPoint);\n    if (options === null || options === void 0 ? void 0 : options.transport) {\n      this.transport = options.transport;\n    } else {\n      this.transport = null;\n    }\n    if (options === null || options === void 0 ? void 0 : options.params) {\n      this.params = options.params;\n    }\n    if (options === null || options === void 0 ? void 0 : options.headers) {\n      this.headers = Object.assign(Object.assign({}, this.headers), options.headers);\n    }\n    if (options === null || options === void 0 ? void 0 : options.timeout) {\n      this.timeout = options.timeout;\n    }\n    if (options === null || options === void 0 ? void 0 : options.logger) {\n      this.logger = options.logger;\n    }\n    if ((options === null || options === void 0 ? void 0 : options.logLevel) || (options === null || options === void 0 ? void 0 : options.log_level)) {\n      this.logLevel = options.logLevel || options.log_level;\n      this.params = Object.assign(Object.assign({}, this.params), {log_level:this.logLevel});\n    }\n    if (options === null || options === void 0 ? void 0 : options.heartbeatIntervalMs) {\n      this.heartbeatIntervalMs = options.heartbeatIntervalMs;\n    }\n    const accessTokenValue = (_a = options === null || options === void 0 ? void 0 : options.params) === null || _a === void 0 ? void 0 : _a.apikey;\n    if (accessTokenValue) {\n      this.accessTokenValue = accessTokenValue;\n      this.apiKey = accessTokenValue;\n    }\n    this.reconnectAfterMs = (options === null || options === void 0 ? void 0 : options.reconnectAfterMs) ? options.reconnectAfterMs : tries => {\n      return [1000, 2000, 5000, 10000][tries - 1] || 10000;\n    };\n    this.encode = (options === null || options === void 0 ? void 0 : options.encode) ? options.encode : (payload, callback) => {\n      return callback(JSON.stringify(payload));\n    };\n    this.decode = (options === null || options === void 0 ? void 0 : options.decode) ? options.decode : this.serializer.decode.bind(this.serializer);\n    this.reconnectTimer = new default$$require$_DOT__SLASH_lib_SLASH_timer.default(async() => {\n      this.disconnect();\n      this.connect();\n    }, this.reconnectAfterMs);\n    this.fetch = this._resolveFetch(options === null || options === void 0 ? void 0 : options.fetch);\n    if (options === null || options === void 0 ? void 0 : options.worker) {\n      if (typeof window !== \"undefined\" && !window.Worker) {\n        throw new Error(\"Web Worker is not supported\");\n      }\n      this.worker = (options === null || options === void 0 ? void 0 : options.worker) || false;\n      this.workerUrl = options === null || options === void 0 ? void 0 : options.workerUrl;\n    }\n    this.accessToken = (options === null || options === void 0 ? void 0 : options.accessToken) || null;\n  }\n  connect() {\n    if (this.conn) {\n      return;\n    }\n    if (!this.transport) {\n      this.transport = default$$require$_DOT__SLASH_WebSocket.default;\n    }\n    if (this.transport) {\n      const isBrowser = typeof window !== \"undefined\" && this.transport === window.WebSocket;\n      if (isBrowser) {\n        this.conn = new this.transport(this.endpointURL());\n      } else {\n        this.conn = new this.transport(this.endpointURL(), undefined, {headers:this.headers,});\n      }\n      this.setupConnection();\n      return;\n    }\n    this.conn = new WSWebSocketDummy(this.endpointURL(), undefined, {close:() => {\n      this.conn = null;\n    },});\n  }\n  endpointURL() {\n    return this._appendParams(this.endPoint, Object.assign({}, this.params, {vsn:require$_DOT__SLASH_lib_SLASH_constants.VSN}));\n  }\n  disconnect(code, reason) {\n    if (this.conn) {\n      this.conn.onclose = function() {\n      };\n      if (code) {\n        this.conn.close(code, reason !== null && reason !== void 0 ? reason : \"\");\n      } else {\n        this.conn.close();\n      }\n      this.conn = null;\n      this.heartbeatTimer && clearInterval(this.heartbeatTimer);\n      this.reconnectTimer.reset();\n      this.channels.forEach(channel => channel.teardown());\n    }\n  }\n  getChannels() {\n    return this.channels;\n  }\n  async removeChannel(channel) {\n    const status = await channel.unsubscribe();\n    this.channels = this.channels.filter(c => c._joinRef !== channel._joinRef);\n    if (this.channels.length === 0) {\n      this.disconnect();\n    }\n    return status;\n  }\n  async removeAllChannels() {\n    const values_1 = await Promise.all(this.channels.map(channel => channel.unsubscribe()));\n    this.channels = [];\n    this.disconnect();\n    return values_1;\n  }\n  log(kind, msg, data) {\n    this.logger(kind, msg, data);\n  }\n  connectionState() {\n    switch(this.conn && this.conn.readyState) {\n      case require$_DOT__SLASH_lib_SLASH_constants.SOCKET_STATES.connecting:\n        return require$_DOT__SLASH_lib_SLASH_constants.CONNECTION_STATE.Connecting;\n      case require$_DOT__SLASH_lib_SLASH_constants.SOCKET_STATES.open:\n        return require$_DOT__SLASH_lib_SLASH_constants.CONNECTION_STATE.Open;\n      case require$_DOT__SLASH_lib_SLASH_constants.SOCKET_STATES.closing:\n        return require$_DOT__SLASH_lib_SLASH_constants.CONNECTION_STATE.Closing;\n      default:\n        return require$_DOT__SLASH_lib_SLASH_constants.CONNECTION_STATE.Closed;\n    }\n  }\n  isConnected() {\n    return this.connectionState() === require$_DOT__SLASH_lib_SLASH_constants.CONNECTION_STATE.Open;\n  }\n  channel(topic, params = {config:{}}) {\n    const realtimeTopic = `realtime:${topic}`;\n    const exists = this.getChannels().find(c => c.topic === realtimeTopic);\n    if (!exists) {\n      const chan = new default$$require$_DOT__SLASH_RealtimeChannel.default(`realtime:${topic}`, params, this);\n      this.channels.push(chan);\n      return chan;\n    } else {\n      return exists;\n    }\n  }\n  push(data) {\n    const {topic, event, payload, ref} = data;\n    const callback = () => {\n      this.encode(data, result => {\n        var _a;\n        (_a = this.conn) === null || _a === void 0 ? void 0 : _a.send(result);\n      });\n    };\n    this.log(\"push\", `${topic} ${event} (${ref})`, payload);\n    if (this.isConnected()) {\n      callback();\n    } else {\n      this.sendBuffer.push(callback);\n    }\n  }\n  async setAuth(token = null) {\n    let tokenToSend = token || this.accessToken && await this.accessToken() || this.accessTokenValue;\n    if (this.accessTokenValue != tokenToSend) {\n      this.accessTokenValue = tokenToSend;\n      this.channels.forEach(channel => {\n        tokenToSend && channel.updateJoinPayload({access_token:tokenToSend, version:this.headers && this.headers[\"X-Client-Info\"],});\n        if (channel.joinedOnce && channel._isJoined()) {\n          channel._push(require$_DOT__SLASH_lib_SLASH_constants.CHANNEL_EVENTS.access_token, {access_token:tokenToSend,});\n        }\n      });\n    }\n  }\n  async sendHeartbeat() {\n    var _a;\n    if (!this.isConnected()) {\n      this.heartbeatCallback(\"disconnected\");\n      return;\n    }\n    if (this.pendingHeartbeatRef) {\n      this.pendingHeartbeatRef = null;\n      this.log(\"transport\", \"heartbeat timeout. Attempting to re-establish connection\");\n      this.heartbeatCallback(\"timeout\");\n      (_a = this.conn) === null || _a === void 0 ? void 0 : _a.close(require$_DOT__SLASH_lib_SLASH_constants.WS_CLOSE_NORMAL, \"hearbeat timeout\");\n      return;\n    }\n    this.pendingHeartbeatRef = this._makeRef();\n    this.push({topic:\"phoenix\", event:\"heartbeat\", payload:{}, ref:this.pendingHeartbeatRef,});\n    this.heartbeatCallback(\"sent\");\n    await this.setAuth();\n  }\n  onHeartbeat(callback) {\n    this.heartbeatCallback = callback;\n  }\n  flushSendBuffer() {\n    if (this.isConnected() && this.sendBuffer.length > 0) {\n      this.sendBuffer.forEach(callback => callback());\n      this.sendBuffer = [];\n    }\n  }\n  _makeRef() {\n    let newRef = this.ref + 1;\n    if (newRef === this.ref) {\n      this.ref = 0;\n    } else {\n      this.ref = newRef;\n    }\n    return this.ref.toString();\n  }\n  _leaveOpenTopic(topic) {\n    let dupChannel = this.channels.find(c => c.topic === topic && (c._isJoined() || c._isJoining()));\n    if (dupChannel) {\n      this.log(\"transport\", `leaving duplicate topic \"${topic}\"`);\n      dupChannel.unsubscribe();\n    }\n  }\n  _remove(channel) {\n    this.channels = this.channels.filter(c => c.topic !== channel.topic);\n  }\n  setupConnection() {\n    if (this.conn) {\n      this.conn.binaryType = \"arraybuffer\";\n      this.conn.onopen = () => this._onConnOpen();\n      this.conn.onerror = error => this._onConnError(error);\n      this.conn.onmessage = event => this._onConnMessage(event);\n      this.conn.onclose = event => this._onConnClose(event);\n    }\n  }\n  _onConnMessage(rawMessage) {\n    this.decode(rawMessage.data, msg => {\n      let {topic, event, payload, ref} = msg;\n      if (topic === \"phoenix\" && event === \"phx_reply\") {\n        this.heartbeatCallback(msg.payload.status == \"ok\" ? \"ok\" : \"error\");\n      }\n      if (ref && ref === this.pendingHeartbeatRef) {\n        this.pendingHeartbeatRef = null;\n      }\n      this.log(\"receive\", `${payload.status || \"\"} ${topic} ${event} ${ref && \"(\" + ref + \")\" || \"\"}`, payload);\n      Array.from(this.channels).filter(channel => channel._isMember(topic)).forEach(channel => channel._trigger(event, payload, ref));\n      this.stateChangeCallbacks.message.forEach(callback => callback(msg));\n    });\n  }\n  _onConnOpen() {\n    this.log(\"transport\", `connected to ${this.endpointURL()}`);\n    this.flushSendBuffer();\n    this.reconnectTimer.reset();\n    if (!this.worker) {\n      this.heartbeatTimer && clearInterval(this.heartbeatTimer);\n      this.heartbeatTimer = setInterval(() => this.sendHeartbeat(), this.heartbeatIntervalMs);\n    } else {\n      if (this.workerUrl) {\n        this.log(\"worker\", `starting worker for from ${this.workerUrl}`);\n      } else {\n        this.log(\"worker\", `starting default worker`);\n      }\n      const objectUrl = this._workerObjectUrl(this.workerUrl);\n      this.workerRef = new Worker(objectUrl);\n      this.workerRef.onerror = error => {\n        this.log(\"worker\", \"worker error\", error.message);\n        this.workerRef.terminate();\n      };\n      this.workerRef.onmessage = event => {\n        if (event.data.event === \"keepAlive\") {\n          this.sendHeartbeat();\n        }\n      };\n      this.workerRef.postMessage({event:\"start\", interval:this.heartbeatIntervalMs,});\n    }\n    this.stateChangeCallbacks.open.forEach(callback => callback());\n  }\n  _onConnClose(event) {\n    this.log(\"transport\", \"close\", event);\n    this._triggerChanError();\n    this.heartbeatTimer && clearInterval(this.heartbeatTimer);\n    this.reconnectTimer.scheduleTimeout();\n    this.stateChangeCallbacks.close.forEach(callback => callback(event));\n  }\n  _onConnError(error) {\n    this.log(\"transport\", error.message);\n    this._triggerChanError();\n    this.stateChangeCallbacks.error.forEach(callback => callback(error));\n  }\n  _triggerChanError() {\n    this.channels.forEach(channel => channel._trigger(require$_DOT__SLASH_lib_SLASH_constants.CHANNEL_EVENTS.error));\n  }\n  _appendParams(url, params) {\n    if (Object.keys(params).length === 0) {\n      return url;\n    }\n    const prefix = url.match(/\\?/) ? \"\\x26\" : \"?\";\n    const query = new URLSearchParams(params);\n    return `${url}${prefix}${query}`;\n  }\n  _workerObjectUrl(url) {\n    let result_url;\n    if (url) {\n      result_url = url;\n    } else {\n      const blob = new Blob([WORKER_SCRIPT], {type:\"application/javascript\"});\n      result_url = URL.createObjectURL(blob);\n    }\n    return result_url;\n  }\n}\nclass WSWebSocketDummy {\n  constructor(address, _protocols, options) {\n    this.binaryType = \"arraybuffer\";\n    this.onclose = () => {\n    };\n    this.onerror = () => {\n    };\n    this.onmessage = () => {\n    };\n    this.onopen = () => {\n    };\n    this.readyState = require$_DOT__SLASH_lib_SLASH_constants.SOCKET_STATES.connecting;\n    this.send = () => {\n    };\n    this.url = null;\n    this.url = address;\n    this.close = options.close;\n  }\n}\n\n};"],
"names":["shadow$provide","global","require","module","exports","Object","defineProperties","__esModule","enumerable","value","default","get","RealtimeClient","require$_DOT__SLASH_WebSocket","require$_DOT__SLASH_lib_SLASH_constants","require$_DOT__SLASH_lib_SLASH_serializer","require$_DOT__SLASH_lib_SLASH_timer","require$_DOT__SLASH_lib_SLASH_transformers","require$_DOT__SLASH_RealtimeChannel","default$$require$_DOT__SLASH_lib_SLASH_serializer","esmDefault","default$$require$_DOT__SLASH_lib_SLASH_timer","default$$require$_DOT__SLASH_WebSocket","default$$require$_DOT__SLASH_RealtimeChannel","noop","constructor","endPoint","options","_a","apiKey","accessTokenValue","channels","httpEndpoint","headers","DEFAULT_HEADERS","params","timeout","DEFAULT_TIMEOUT","heartbeatIntervalMs","heartbeatTimer","undefined","pendingHeartbeatRef","heartbeatCallback","ref","logger","conn","sendBuffer","serializer","stateChangeCallbacks","open","close","error","message","accessToken","_resolveFetch","customFetch","this._resolveFetch","_fetch","fetch","args","then","TRANSPORTS","websocket","httpEndpointURL","transport","assign","logLevel","log_level","apikey","reconnectAfterMs","tries","encode","payload","callback","JSON","stringify","decode","bind","reconnectTimer","disconnect","connect","worker","window","Worker","Error","workerUrl","WebSocket","endpointURL","setupConnection","WSWebSocketDummy","_appendParams","vsn","VSN","code","reason","onclose","this.conn.onclose","clearInterval","reset","forEach","channel","teardown","getChannels","removeChannel","status","unsubscribe","filter","c","_joinRef","length","removeAllChannels","values_1","Promise","all","map","log","kind","msg","data","connectionState","readyState","SOCKET_STATES","connecting","CONNECTION_STATE","Connecting","Open","closing","Closing","Closed","isConnected","topic","config","realtimeTopic","exists","find","chan","push","event","result","send","setAuth","token","tokenToSend","updateJoinPayload","access_token","version","joinedOnce","_isJoined","_push","CHANNEL_EVENTS","sendHeartbeat","WS_CLOSE_NORMAL","_makeRef","onHeartbeat","flushSendBuffer","newRef","toString","_leaveOpenTopic","dupChannel","_isJoining","_remove","binaryType","onopen","this.conn.onopen","_onConnOpen","onerror","this.conn.onerror","_onConnError","onmessage","this.conn.onmessage","_onConnMessage","_onConnClose","rawMessage","Array","from","_isMember","_trigger","objectUrl","_workerObjectUrl","workerRef","this.workerRef.onerror","terminate","this.workerRef.onmessage","postMessage","interval","setInterval","_triggerChanError","scheduleTimeout","url","keys","prefix","match","query","URLSearchParams","blob","Blob","WORKER_SCRIPT","type","result_url","URL","createObjectURL","address","_protocols","this.onclose","this.onerror","this.onmessage","this.onopen","this.send"]
}
