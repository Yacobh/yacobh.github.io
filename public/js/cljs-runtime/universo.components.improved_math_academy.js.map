{"version":3,"sources":["universo/components/improved_math_academy.cljs"],"mappings":"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","names":["universo.components.improved-math-academy/improved-math-questions","universo.components.improved-math-academy/question-card","question","question-index","selected-answers","on-select","selected","cljs.core/deref","cljs.core.get","G__12236","js/Error","iter__5480__auto__","s__12238","cljs.core/LazySeq","temp__5804__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__5478__auto__","size__5479__auto__","cljs.core/count","b__12240","cljs.core/chunk-buffer","i__12239","vec__12241","cljs.core/-nth","cljs.core.nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__12237","cljs.core/chunk-rest","vec__12246","cljs.core/first","cljs.core/cons","cljs.core/rest","opt-index","option","cljs.core.map_indexed","cljs.core/vector","cljs.core._EQ_","G__12244","G__12245","G__12249","G__12250","universo.components.improved-math-academy/test-progress","answered-count","total-count","universo.components.improved-math-academy/test-results","score","correct-answers","total-questions","weak-areas","percentage","s__12252","b__12254","i__12253","iter__12251","area","universo.components.improved-math-academy/improved-math-test","reagent.core.atom","test-completed","test-score","question-id","option-index","cljs.core.swap_BANG_","cljs.core/assoc","correct-count","cljs.core.reduce","acc","p1__12255#","cljs.core.filter","cljs.core.not_EQ_","cljs.core.map","cljs.core.distinct","cljs.core/vec","js/alert","results","calculate-results","cljs.core/reset!","js/console.log","restart-test","s__12257","b__12259","i__12258","vec__12260","iter__12256","vec__12263","index","select-option","submit-test","cljs.core/chunk-first"],"sourcesContent":["(ns universo.components.improved-math-academy\n  (:require [reagent.core :as r]\n            [clojure.string :as str]))\n\n(def improved-math-questions\n  [{:id 1\n    :question \"\u00bfCu\u00e1l es el resultado de 15 + 27?\"\n    :options [\"40\" \"42\" \"43\" \"45\"]\n    :correct 1\n    :topic \"Aritm\u00e9tica B\u00e1sica\"\n    :difficulty \"b\u00e1sico\"}\n   {:id 2\n    :question \"Si x + 5 = 12, \u00bfcu\u00e1l es el valor de x?\"\n    :options [\"5\" \"6\" \"7\" \"8\"]\n    :correct 2\n    :topic \"\u00c1lgebra B\u00e1sica\"\n    :difficulty \"b\u00e1sico\"}\n   {:id 3\n    :question \"\u00bfCu\u00e1l es el \u00e1rea de un rect\u00e1ngulo de 8cm \u00d7 6cm?\"\n    :options [\"42 cm\u00b2\" \"46 cm\u00b2\" \"48 cm\u00b2\" \"50 cm\u00b2\"]\n    :correct 2\n    :topic \"Geometr\u00eda\"\n    :difficulty \"intermedio\"}\n   {:id 4\n    :question \"\u00bfCu\u00e1l es el resultado de 3\u00b2 + 4\u00b2?\"\n    :options [\"12\" \"20\" \"25\" \"49\"]\n    :correct 2\n    :topic \"Potencias\"\n    :difficulty \"intermedio\"}\n   {:id 5\n    :question \"Si una pizza se divide en 8 partes iguales y comes 3, \u00bfqu\u00e9 fracci\u00f3n queda?\"\n    :options [\"3/8\" \"5/8\" \"3/5\" \"5/3\"]\n    :correct 1\n    :topic \"Fracciones\"\n    :difficulty \"intermedio\"}\n   {:id 6\n    :question \"\u00bfCu\u00e1l es la derivada de f(x) = x\u00b2?\"\n    :options [\"x\" \"2x\" \"x\u00b2\" \"2x\u00b2\"]\n    :correct 1\n    :topic \"C\u00e1lculo\"\n    :difficulty \"avanzado\"}\n   {:id 7\n    :question \"Resuelve: 2x - 3 = 7\"\n    :options [\"x = 4\" \"x = 5\" \"x = 6\" \"x = 7\"]\n    :correct 1\n    :topic \"\u00c1lgebra B\u00e1sica\"\n    :difficulty \"b\u00e1sico\"}\n   {:id 8\n    :question \"\u00bfCu\u00e1l es el per\u00edmetro de un tri\u00e1ngulo con lados 3, 4 y 5 cm?\"\n    :options [\"10 cm\" \"12 cm\" \"15 cm\" \"20 cm\"]\n    :correct 1\n    :topic \"Geometr\u00eda\"\n    :difficulty \"b\u00e1sico\"}])\n\n(defn question-card [question question-index selected-answers on-select]\n  (let [selected (get @selected-answers (:id question))]\n    [:div.question-card.bg-white.border.border-gray-200.rounded-lg.p-6.mb-6.shadow-sm\n     [:div.question-header.mb-4\n      [:span.question-number.bg-blue-100.text-blue-800.px-3.py-1.rounded-full.text-sm.font-semibold.mr-3\n       (str \"Pregunta \" (inc question-index))]\n      [:span.topic-badge.bg-gray-100.text-gray-600.px-2.py-1.rounded.text-xs\n       (:topic question)]\n      [:span.difficulty-badge.ml-2.px-2.py-1.rounded.text-xs\n       {:class (case (:difficulty question)\n                 \"b\u00e1sico\" \"bg-green-100 text-green-800\"\n                 \"intermedio\" \"bg-yellow-100 text-yellow-800\"\n                 \"avanzado\" \"bg-red-100 text-red-800\")}\n       (:difficulty question)]]\n\n     [:h3.question-text.text-lg.font-semibold.text-gray-800.mb-4\n      (:question question)]\n\n     [:div.options-container.space-y-3\n      (for [[opt-index option] (map-indexed vector (:options question))]\n        ^{:key (str (:id question) \"-\" opt-index)}\n        [:div.option-card.border.border-gray-200.rounded-lg.p-3.cursor-pointer.transition-all.duration-200.hover:border-blue-300.hover:bg-blue-50\n         {:class (if (= selected opt-index)\n                   \"border-blue-500 bg-blue-50 ring-2 ring-blue-200\"\n                   \"\")\n          :on-click #(on-select (:id question) opt-index)}\n         [:div.flex.items-center\n          [:div.radio-indicator.w-4.h-4.rounded-full.border-2.mr-3.flex.items-center.justify-center\n           {:class (if (= selected opt-index)\n                     \"border-blue-500 bg-blue-500\"\n                     \"border-gray-300\")}\n           (when (= selected opt-index)\n             [:div.w-2.h-2.bg-white.rounded-full])]\n          [:span.text-gray-700.font-medium option]]])]]))\n\n(defn test-progress [answered-count total-count]\n  [:div.progress-container.mb-6\n   [:div.flex.justify-between.items-center.mb-2\n    [:span.text-sm.font-medium.text-gray-700 \"Progreso del Test\"]\n    [:span.text-sm.text-gray-500 (str answered-count \"/\" total-count \" completadas\")]]\n   [:div.progress-bar.w-full.bg-gray-200.rounded-full.h-2\n    [:div.progress-fill.bg-blue-600.h-2.rounded-full.transition-all.duration-300\n     {:style {:width (str (* (/ answered-count total-count) 100) \"%\")}}]]])\n\n(defn test-results [score correct-answers total-questions weak-areas]\n  (let [percentage (:percentage score)]\n    [:div.results-container.bg-white.rounded-lg.shadow-lg.p-8.text-center\n     [:div.score-circle.mx-auto.mb-6.w-32.h-32.rounded-full.flex.items-center.justify-center.text-4xl.font-bold\n      {:class (cond\n                (>= percentage 80) \"bg-green-100 text-green-600\"\n                (>= percentage 60) \"bg-yellow-100 text-yellow-600\"\n                :else \"bg-red-100 text-red-600\")}\n      (str (int percentage) \"%\")]\n\n     [:div.score-details.mb-6\n      [:h3.text-2xl.font-bold.text-gray-800.mb-2 \"Resultados del Test\"]\n      [:p.text-lg.text-gray-600\n       (str \"Respondiste correctamente \" correct-answers \" de \" total-questions \" preguntas\")]]\n\n     [:div.recommendation.bg-gray-50.rounded-lg.p-6.mb-6.text-left\n      [:h4.font-semibold.text-gray-800.mb-3 \"Recomendaci\u00f3n Personalizada:\"]\n      [:p.text-gray-700.leading-relaxed\n       (cond\n         (>= percentage 80)\n         \"\u00a1Excelente! Tienes una base s\u00f3lida en matem\u00e1ticas. Podemos enfocarnos en temas avanzados y desafiantes para llevarte al siguiente nivel.\"\n\n         (>= percentage 60)\n         \"\u00a1Buen trabajo! Tienes conocimientos intermedios. Podemos reforzar algunas \u00e1reas y avanzar gradualmente hacia temas m\u00e1s complejos.\"\n\n         :else\n         \"Hay espacio para mejorar, pero \u00a1no te preocupes! Comenzaremos desde lo b\u00e1sico y construiremos una base s\u00f3lida paso a paso.\")]\n\n      (when (seq weak-areas)\n        [:div.mt-4\n         [:h5.font-semibold.text-gray-800.mb-2 \"\u00c1reas a reforzar:\"]\n         [:div.flex.flex-wrap.gap-2\n          (for [area weak-areas]\n            ^{:key area}\n            [:span.bg-orange-100.text-orange-800.px-3.py-1.rounded-full.text-sm area])]])]]))\n\n(defn improved-math-test []\n  (let [selected-answers (r/atom {})\n        test-completed (r/atom false)\n        test-score (r/atom nil)]\n\n    (letfn [(select-option [question-id option-index]\n              (swap! selected-answers assoc question-id option-index))\n\n            (calculate-results []\n              (let [correct-count (reduce (fn [acc question]\n                                           (if (= (get @selected-answers (:id question))\n                                                 (:correct question))\n                                             (inc acc)\n                                             acc))\n                                         0 improved-math-questions)\n                    percentage (* (/ correct-count (count improved-math-questions)) 100)\n                    weak-areas (->> improved-math-questions\n                                   (filter #(not= (get @selected-answers (:id %))\n                                                 (:correct %)))\n                                   (map :topic)\n                                   distinct\n                                   vec)]\n                {:correct correct-count\n                 :total (count improved-math-questions)\n                 :percentage percentage\n                 :weak-areas weak-areas}))\n\n            (submit-test []\n              (let [answered-count (count @selected-answers)]\n                (if (< answered-count (count improved-math-questions))\n                  (js/alert \"Por favor responde todas las preguntas antes de enviar el test.\")\n                  (let [results (calculate-results)]\n                    (reset! test-score results)\n                    (reset! test-completed true)))))\n\n            (restart-test []\n              (reset! selected-answers {})\n              (reset! test-completed false)\n              (reset! test-score nil))]\n\n      (fn []\n        (if @test-completed\n          ;; Mostrar resultados\n          [:div.test-results\n           [test-results @test-score (:correct @test-score) (:total @test-score) (:weak-areas @test-score)]\n           [:div.text-center.mt-6.space-x-4\n            [:button.btn.bg-green-600.text-white.px-6.py-3.rounded-lg.font-semibold.hover:bg-green-700.transition-colors\n             {:on-click #(js/console.log \"Ir a agendar clase\")} ; Aqu\u00ed conectar\u00edas con la funci\u00f3n de booking\n             \"Agendar Clase Personalizada\"]\n            [:button.btn.bg-gray-500.text-white.px-6.py-3.rounded-lg.font-semibold.hover:bg-gray-600.transition-colors\n             {:on-click restart-test}\n             \"Reiniciar Test\"]]]\n\n          ;; Mostrar test\n          [:div.test-container\n           [:div.test-header.mb-8\n            [:h2.text-3xl.font-bold.text-gray-800.mb-4\n             [:span.mr-3 \"\ud83c\udfaf\"] \"Test Diagn\u00f3stico de Matem\u00e1ticas\"]\n            [:p.text-gray-600.mb-6\n             \"Responde todas las preguntas para obtener una evaluaci\u00f3n personalizada de tu nivel.\"]\n            [test-progress (count @selected-answers) (count improved-math-questions)]]\n\n           [:div.questions-container\n            (for [[index question] (map-indexed vector improved-math-questions)]\n              ^{:key (:id question)}\n              [question-card question index selected-answers select-option])]\n\n           [:div.test-actions.text-center.mt-8.space-x-4\n            [:button.btn.bg-blue-600.text-white.px-8.py-3.rounded-lg.font-semibold.hover:bg-blue-700.transition-colors.disabled:opacity-50.disabled:cursor-not-allowed\n             {:on-click submit-test\n              :disabled (< (count @selected-answers) (count improved-math-questions))}\n             \"Enviar Test\"]\n            [:button.btn.bg-gray-500.text-white.px-6.py-3.rounded-lg.font-semibold.hover:bg-gray-600.transition-colors\n             {:on-click restart-test}\n             \"Reiniciar\"]]])))))\n"]}