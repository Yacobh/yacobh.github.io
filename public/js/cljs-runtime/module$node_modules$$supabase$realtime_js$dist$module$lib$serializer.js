shadow$provide.module$node_modules$$supabase$realtime_js$dist$module$lib$serializer = function(global, require, module, exports) {
  Object.defineProperties(exports, {__esModule:{enumerable:!0, value:!0}, default:{enumerable:!0, get:function() {
    return Serializer;
  }}});
  class Serializer {
    constructor() {
      this.HEADER_LENGTH = 1;
    }
    decode(rawPayload, callback) {
      return rawPayload.constructor === ArrayBuffer ? callback(this._binaryDecode(rawPayload)) : "string" === typeof rawPayload ? callback(JSON.parse(rawPayload)) : callback({});
    }
    _binaryDecode(buffer) {
      const view = new DataView(buffer), decoder = new TextDecoder();
      return this._decodeBroadcast(buffer, view, decoder);
    }
    _decodeBroadcast(buffer, view, decoder) {
      var topicSize = view.getUint8(1);
      const eventSize = view.getUint8(2);
      let offset = this.HEADER_LENGTH + 2;
      view = decoder.decode(buffer.slice(offset, offset + topicSize));
      offset += topicSize;
      topicSize = decoder.decode(buffer.slice(offset, offset + eventSize));
      buffer = JSON.parse(decoder.decode(buffer.slice(offset + eventSize, buffer.byteLength)));
      return {ref:null, topic:view, event:topicSize, payload:buffer};
    }
  }
};

//# sourceMappingURL=module$node_modules$$supabase$realtime_js$dist$module$lib$serializer.js.map
