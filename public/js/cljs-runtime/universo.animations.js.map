{"version":3,"sources":["universo/animations.cljs"],"mappings":";AAIA,6CAAA,7CAAMA;AAAN,AACE,IAAMC,OAAK,AAAQC;AAAnB,AACE,6BAAA,tBAAS,AAAaD;;AAE1B,GAAA,QAAAE,qCAAAC,gDAAAC;AAAA;AAAA,AAAA,AAASC,mCAAa,gDAAA,2CAAA,+CAAA,IAAA,gDAAA,IAAA,8DAAA,hQAACC;;AAEvB,mCAAA,nCAAMC,8EAAcC;AAApB,AACE,AAACC,mDAAMJ,iCACA,WAAKK;AAAL,AACE,IAAMC,YAAU,AAAA,6EAAID;IACdE,WAAS,AAAA,4FAAWF;gBAD1B,ZAEMG;IACAC,QAAM,EAAI,CAAGH,YAAUC,WACf,iBAAAG,kBAAKH;IAALI,kBAAc,CAAGL,YAAUE;AAA3B,AAAA,SAAAE,kBAAAC,mBAAAD,kBAAAC;KACA,iBAAAC,kBAAKL;IAALM,kBAAc,CAAGP,YAAUE;AAA3B,AAAA,SAAAI,kBAAAC,mBAAAD,kBAAAC;;AALd,AAME,iEAAA,1DAACC,8CAAMT,2DAAeI;;;AAEjC,GAAM,AAACM,gDAAK,AAAA,6EAAA,AAAAC,gBAAKhB,mCAAc,AAAA,4FAAA,AAAAgB,gBAAYhB;AAA3C,AACE,OAACiB,sBAAyBf;;AAD5B;;;AAGF,sCAAA,tCAAMgB,oFAAiBC;AAAvB,AACE,oGAAA,pGAACf,mDAAMJ,iCAAaoB,8EAAgBD;;AACpC,OAACF,sBAAyBf;;AAE5B,4CAAA,5CAAMmB;AAAN,AACE,UAAA,AAAAL,NAAMM,sBAAKtB;AAAX,AAAA,0FAAA,iFAAA,2CAAA,uDAAA,2CAAA,+DAEuB,CAAA,6IAAA,kJAAA,rOAAmB,AAAA,6EAAIsB,oEAAuB,AAAA,8EAAIA;;AAO3E,AAAKC,gCAAU,gDAAA,2CAAA,4DAAA,vJAACtB;AAGhB,+BAAA,/BAAMuB;AAAN,AAEE,kBAAA,XAACC;AAAD,AAAgB,wGAAA,4DAAA,7JAACrB,mDAAMmB,8BAAUH;GAAjC;;AAKF,0BAAA,1BAAMM;AAAN,AAAA,0FAAA,mDAAA,qIAAA,mFAAA,yDAAA,2CAAA,6DAAA,tSAEIL;AAFJ,AAGwB,2CAAA,pCAACH;WAHzB,wBAAA,mFAAA,yDAAA,2CAAA,6DAAA;AAAA,AAIwB,2CAAA,pCAACA;WAJzB;;AAMA,mCAAA,nCAAMS;AAAN,AACE,IAAMhC,OAAK,AAAQC;AAAnB,AAEE,mBAAA,nBAAM,AAAaD;;AAGnB,OAAC8B,WACA;AAAA,AACE,6BAAA,tBAAS,AAAa9B;GAFzB;;AAOJ,gCAAA,hCAAMiC;AAAN,AAEE,AAACD;;AACD,+DAAA,2CAAA,iHAAA,pNAACE,uLACsBL,sGAErB;AAAA,AAAA,0FAAA,8EAAA,mFAAA,mEAAA,2CAAA,6OAAA,rLAGY,6JAAA,AAAA,UAAA,rJAAM,AAAA,0FAAA,AAAAR,gBAAWO","names":["universo.animations/toggle-dark-mode!","body","js/document","js/universo","js/universo.animations","js/universo.animations.box-position","universo.animations/box-position","reagent.core.atom","universo.animations/animate-step","timestamp","cljs.core.swap_BANG_","current-pos","current-x","target-x","step-size","new-x","x__5090__auto__","y__5091__auto__","x__5087__auto__","y__5088__auto__","cljs.core.assoc","cljs.core.not_EQ_","cljs.core/deref","js/requestAnimationFrame","universo.animations/start-animation","target-x-pos","cljs.core/assoc","universo.animations/movable-box-component","pos","universo.animations/wow-state","universo.animations/show-wow","js/setTimeout","universo.animations/app","universo.animations/fade-in-page","universo.animations/home-page","reagent.core.create_class"],"sourcesContent":["(ns universo.animations\n  (:require [reagent.core :as r]))\n\n\n(defn toggle-dark-mode! []\n  (let [body (.-body js/document)]\n    (.toggle (.-classList body) \"dark-mode\")))\n\n(defonce box-position (r/atom {:x 0 :y 0 :target-x 0}))\n\n(defn animate-step [timestamp]\n  (swap! box-position\n         (fn [current-pos]\n           (let [current-x (:x current-pos)\n                 target-x (:target-x current-pos)\n                 step-size 10\n                 new-x (if (< current-x target-x)\n                         (min target-x (+ current-x step-size))\n                         (max target-x (- current-x step-size)))]\n             (assoc current-pos :x new-x))))\n\n  (when (not= (:x @box-position) (:target-x @box-position)) ; Continuar si no hemos llegado al destino\n    (js/requestAnimationFrame animate-step)))\n\n(defn start-animation [target-x-pos]\n  (swap! box-position assoc :target-x target-x-pos)\n  (js/requestAnimationFrame animate-step)) ; Inicia el bucle de animaci\u00f3n\n\n(defn movable-box-component []\n  (let [pos @box-position]\n    [:div.movable-circle\n     {:style {:transform (str \"translateX(\" (:x pos) \"px) translateY(\" (:y pos) \"px)\")}}]))\n     ; No se usa (:y pos) en este ejemplo, pero se podr\u00eda a\u00f1adir l\u00f3gica para ello\n\n\n\n\n;; Estado para controlar la animaci\u00f3n\n(def wow-state (r/atom {:visible false}))\n\n;; Funci\u00f3n para activar la animaci\u00f3n cuando el componente se monta\n(defn show-wow []\n  ;; Peque\u00f1o retardo para que la animaci\u00f3n sea visible despu\u00e9s de la carga\n  (js/setTimeout #(swap! wow-state assoc :visible true) 1000))\n\n;; -------------------------\n;; Views\n\n(defn app []\n  [:div\n   [movable-box-component]\n   [:button {:on-click #(start-animation 200)} \"Move to 200px\"]\n   [:button {:on-click #(start-animation 0)} \"Move to 0px\"]])\n\n(defn fade-in-page []\n  (let [body (.-body js/document)]\n    ;; A\u00f1ade la clase de desvanecimiento\n    (.add (.-classList body) \"fading\")\n\n    ;; Quita la clase despu\u00e9s de un breve retraso\n    (js/setTimeout\n     (fn []\n       (.remove (.-classList body) \"fading\"))\n     5000)))\n\n\n\n(defn home-page []\n  ;; Ejecuta show-wow cuando el componente se monta\n  (fade-in-page)\n  (r/create-class\n   {:component-did-mount show-wow\n    :reagent-render\n    (fn []\n      [:div.wow-container\n       [:h2.wow-text\n        {:class (when (:visible @wow-state) \"visible\")}\n        \"WOW\"]])}))\n"]}