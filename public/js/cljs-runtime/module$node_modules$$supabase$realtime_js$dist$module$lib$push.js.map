{
"version":3,
"file":"module$node_modules$$supabase$realtime_js$dist$module$lib$push.js",
"lineCount":71,
"mappings":"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",
"sources":["node_modules/@supabase/realtime-js/dist/module/lib/push.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$supabase$realtime_js$dist$module$lib$push\"] = function(global,require,module,exports) {\nObject.defineProperties(exports, {__esModule:{enumerable:true, value:true}, default:{enumerable:true, get:function() {\n  return Push;\n}}});\nvar require$_DOT__DOT__SLASH_lib_SLASH_constants = require(\"../lib/constants\");\nclass Push {\n  constructor(channel, event, payload = {}, timeout = require$_DOT__DOT__SLASH_lib_SLASH_constants.DEFAULT_TIMEOUT) {\n    this.channel = channel;\n    this.event = event;\n    this.payload = payload;\n    this.timeout = timeout;\n    this.sent = false;\n    this.timeoutTimer = undefined;\n    this.ref = \"\";\n    this.receivedResp = null;\n    this.recHooks = [];\n    this.refEvent = null;\n  }\n  resend(timeout) {\n    this.timeout = timeout;\n    this._cancelRefEvent();\n    this.ref = \"\";\n    this.refEvent = null;\n    this.receivedResp = null;\n    this.sent = false;\n    this.send();\n  }\n  send() {\n    if (this._hasReceived(\"timeout\")) {\n      return;\n    }\n    this.startTimeout();\n    this.sent = true;\n    this.channel.socket.push({topic:this.channel.topic, event:this.event, payload:this.payload, ref:this.ref, join_ref:this.channel._joinRef(),});\n  }\n  updatePayload(payload) {\n    this.payload = Object.assign(Object.assign({}, this.payload), payload);\n  }\n  receive(status, callback) {\n    var _a;\n    if (this._hasReceived(status)) {\n      callback((_a = this.receivedResp) === null || _a === void 0 ? void 0 : _a.response);\n    }\n    this.recHooks.push({status, callback});\n    return this;\n  }\n  startTimeout() {\n    if (this.timeoutTimer) {\n      return;\n    }\n    this.ref = this.channel.socket._makeRef();\n    this.refEvent = this.channel._replyEventName(this.ref);\n    const callback = payload => {\n      this._cancelRefEvent();\n      this._cancelTimeout();\n      this.receivedResp = payload;\n      this._matchReceive(payload);\n    };\n    this.channel._on(this.refEvent, {}, callback);\n    this.timeoutTimer = setTimeout(() => {\n      this.trigger(\"timeout\", {});\n    }, this.timeout);\n  }\n  trigger(status, response) {\n    if (this.refEvent) {\n      this.channel._trigger(this.refEvent, {status, response});\n    }\n  }\n  destroy() {\n    this._cancelRefEvent();\n    this._cancelTimeout();\n  }\n  _cancelRefEvent() {\n    if (!this.refEvent) {\n      return;\n    }\n    this.channel._off(this.refEvent, {});\n  }\n  _cancelTimeout() {\n    clearTimeout(this.timeoutTimer);\n    this.timeoutTimer = undefined;\n  }\n  _matchReceive({status, response}) {\n    this.recHooks.filter(h => h.status === status).forEach(h => h.callback(response));\n  }\n  _hasReceived(status) {\n    return this.receivedResp && this.receivedResp.status === status;\n  }\n}\n\n};"],
"names":["shadow$provide","global","require","module","exports","Object","defineProperties","__esModule","enumerable","value","default","get","Push","require$_DOT__DOT__SLASH_lib_SLASH_constants","constructor","channel","event","payload","timeout","DEFAULT_TIMEOUT","sent","timeoutTimer","undefined","ref","receivedResp","recHooks","refEvent","resend","_cancelRefEvent","send","_hasReceived","startTimeout","socket","push","topic","join_ref","_joinRef","updatePayload","assign","receive","status","callback","_a","response","_makeRef","_replyEventName","_on","_cancelTimeout","_matchReceive","setTimeout","trigger","_trigger","destroy","_off","clearTimeout","filter","h","forEach"]
}
