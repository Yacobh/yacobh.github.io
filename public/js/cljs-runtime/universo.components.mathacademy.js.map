{"version":3,"sources":["universo/components/mathacademy.cljs"],"mappings":"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","names":["universo.components.mathacademy/math-questions","universo.components.mathacademy/math-academy-component","current-section","reagent.core.atom","test-answers","test-score","form-data","form-submitted","cljs.core/reset!","question-id","answer-index","cljs.core.swap_BANG_","cljs.core/assoc","correct-count","cljs.core.reduce","acc","question","cljs.core._EQ_","cljs.core/deref","cljs.core.get","percentage","cljs.core/count","e","booking-data","js/console.log","universo.db.supabase/add-guestbook-entry","response","p1__11901#","js/console.error","G__11961","cljs.core/Keyword","p1__11903#","p1__11904#","p1__11905#","p1__11906#","p1__11907#","p1__11908#","js/Error","show-booking","universo.components.improved-math-academy/improved-math-test","submit-booking","show-main","get-recommendation"],"sourcesContent":["(ns universo.components.mathacademy\n  (:require [reagent.core :as r]\n            [clojure.string :as str]\n            [universo.components.improved-math-academy :as improved-math-academy]\n            [universo.db.supabase :as supabase]))\n\n(def math-questions\n  [{:id 1\n    :question \"\u00bfCu\u00e1l es el resultado de 2x + 5 = 13?\"\n    :options [\"x = 4\" \"x = 6\" \"x = 8\" \"x = 9\"]\n    :correct 0\n    :level \"basico\"}\n   {:id 2\n    :question \"Si f(x) = 3x\u00b2 - 2x + 1, \u00bfcu\u00e1l es f(2)?\"\n    :options [\"9\" \"11\" \"13\" \"15\"]\n    :correct 0\n    :level \"intermedio\"}\n   {:id 3\n    :question \"\u00bfCu\u00e1l es la derivada de x\u00b3 + 2x\u00b2?\"\n    :options [\"3x\u00b2 + 4x\" \"x\u00b2 + 4x\" \"3x\u00b2 + 2x\" \"x\u00b3 + 4x\"]\n    :correct 0\n    :level \"avanzado\"}\n   {:id 4\n    :question \"En un tri\u00e1ngulo rect\u00e1ngulo, si un cateto mide 3 y la hipotenusa 5, \u00bfcu\u00e1l es el otro cateto?\"\n    :options [\"4\" \"6\" \"7\" \"8\"]\n    :correct 0\n    :level \"basico\"}\n   {:id 5\n    :question \"\u00bfCu\u00e1l es el l\u00edmite de (sin x)/x cuando x tiende a 0?\"\n    :options [\"0\" \"1\" \"\u221e\" \"No existe\"]\n    :correct 1\n    :level \"avanzado\"}])\n\n(defn math-academy-component []\n  (let [current-section (r/atom :main)\n        test-answers (r/atom {})\n        test-score (r/atom nil)\n        form-data (r/atom {:name \"\" :email \"\" :phone \"\" :class-type \"\" :level \"\" :topics \"\"})\n        form-submitted (r/atom false)]\n\n    (letfn [(start-test []\n              (reset! current-section :test)\n              (reset! test-answers {})\n              (reset! test-score nil))\n\n            (show-booking []\n              (reset! current-section :booking))\n\n            (show-main []\n              (reset! current-section :main))\n\n            (answer-question [question-id answer-index]\n              (swap! test-answers assoc question-id answer-index))\n\n            (submit-test []\n              (let [correct-count (reduce (fn [acc question]\n                                            (if (= (get @test-answers (:id question))\n                                                   (:correct question))\n                                              (inc acc)\n                                              acc))\n                                          0 math-questions)\n                    percentage (* (/ correct-count (count math-questions)) 100)]\n                (reset! test-score {:correct correct-count\n                                    :total (count math-questions)\n                                    :percentage percentage})\n                (reset! current-section :results)))\n\n            (submit-booking [e]\n                            (.preventDefault e)\n                            (reset! form-submitted true)\n\n                            ;; Mapea los datos del formulario a los campos de la tabla\n                            (let [booking-data {:name (:name @form-data)\n                                                :email (:email @form-data)\n                                                :phone (:phone @form-data)\n                                                :message (str \"Tipo: \" (:class-type @form-data)\n                                                              \"\\nNivel: \" (:level @form-data)\n                                                              \"\\nTemas: \" (:topics @form-data))}]\n\n                              (js/console.log \"Booking data to submit:\" booking-data)\n\n                              (-> (supabase/add-guestbook-entry booking-data)\n                                  (.then (fn [response]\n                                           (js/console.log \"Booking submitted successfully: \" response)\n                                           (reset! form-submitted false)\n                                           (reset! current-section :main)\n                                           (reset! form-data {:name \"\" :email \"\" :phone \"\"\n                                                              :class-type \"\" :level \"\" :topics \"\"})))\n                                  (.catch #(do (js/console.error \"Error submitting:\" %)\n                                               (reset! form-submitted false))))))\n\n            (get-recommendation [percentage]\n              (cond\n                (>= percentage 80) \"\u00a1Excelente! Tienes una base s\u00f3lida. Te recomendamos clases de nivel avanzado para perfeccionar tus habilidades.\"\n                (>= percentage 60) \"\u00a1Bien! Tienes conocimientos intermedios. Las clases personalizadas te ayudar\u00e1n a fortalecer conceptos clave.\"\n                (>= percentage 40) \"Tienes una base b\u00e1sica. Te recomendamos comenzar con reforzamiento de conceptos fundamentales.\"\n                :else \"No te preocupes, todos comenzamos desde alg\u00fan lugar. Las clases personalizadas te ayudar\u00e1n a construir una base s\u00f3lida.\"))]\n\n      (fn []\n        [:div.container.max-w-4xl.mx-auto.p-4\n\n         ;; Header\n         [:header.text-center.mb-8\n          [:h1.text-4xl.font-bold.text-blue-900.mb-2 \"\ud83e\uddee MathAcademy Iquique\"]\n          [:p.text-lg.text-gray-600 \"Clases de Matem\u00e1ticas Personalizadas | Virtual y Presencial\"]]\n\n         ;; Main Content\n         (case @current-section\n           :main\n\n           #_[:div.card.bg-white.rounded-lg.shadow-lg.p-6\n              [:h2.text-2xl.font-bold.text-gray-800.mb-4\n               [:span.mr-2 \"\ud83d\udcca\"] \"Test Diagn\u00f3stico\"]\n              [:p.text-gray-600.mb-6\n               \"Realiza nuestro test diagn\u00f3stico para identificar tus fortalezas y \u00e1reas de mejora en matem\u00e1ticas. Esto nos ayudar\u00e1 a personalizar tu experiencia de aprendizaje.\"]\n              [:button.btn.bg-blue-600.text-white.px-6.py-3.rounded-lg.font-semibold.hover:bg-blue-700.transition-colors\n               {:on-click start-test}\n               \"Comenzar Test\"]]\n\n           [:div.card.bg-white.rounded-lg.shadow-lg.p-6\n            [:h2.text-2xl.font-bold.text-gray-800.mb-4\n             [:span.mr-2 \"\ud83d\udcc5\"] \"Agendar Clase\"]\n            [:p.text-gray-600.mb-6\n             \"Reserva tu clase personalizada conmigo. Disponible tanto virtual como presencial en Iquique. Adaptamos el contenido seg\u00fan tus necesidades espec\u00edficas.\"]\n            [:button.btn.bg-green-600.text-white.px-6.py-3.rounded-lg.font-semibold.hover:bg-green-700.transition-colors\n             {:on-click show-booking}\n             \"Agendar Ahora\"]]\n\n           :test\n           [:div (improved-math-academy/improved-math-test)]\n\n           :booking\n           [:div.card.bg-white.rounded-lg.shadow-lg.p-6\n            [:h2.text-2xl.font-bold.text-gray-800.mb-6\n             [:span.mr-2 \"\ud83d\udcdd\"] \"Agendar tu Clase\"]\n            [:form {:on-submit submit-booking}\n             [:div.grid.md:grid-cols-2.gap-4\n              [:div.form-group.mb-4\n               [:label.block.text-sm.font-medium.text-gray-700.mb-2 {:for \"name\"} \"Nombre Completo\"]\n               [:input.form-input.w-full.px-3.py-2.border.border-gray-300.rounded-md.focus:outline-none.focus:ring-2.focus:ring-blue-500\n                {:type \"text\" :id \"name\" :required true\n                 :value (:name @form-data)\n                 :on-change #(swap! form-data assoc :name (-> % .-target .-value))}]]\n\n              [:div.form-group.mb-4\n               [:label.block.text-sm.font-medium.text-gray-700.mb-2 {:for \"email\"} \"Email\"]\n               [:input.form-input.w-full.px-3.py-2.border.border-gray-300.rounded-md.focus:outline-none.focus:ring-2.focus:ring-blue-500\n                {:type \"email\" :id \"email\" :required true\n                 :value (:email @form-data)\n                 :on-change #(swap! form-data assoc :email (-> % .-target .-value))}]]]\n\n             [:div.grid.md:grid-cols-2.gap-4\n              [:div.form-group.mb-4\n               [:label.block.text-sm.font-medium.text-gray-700.mb-2 {:for \"phone\"} \"Tel\u00e9fono\"]\n               [:input.form-input.w-full.px-3.py-2.border.border-gray-300.rounded-md.focus:outline-none.focus:ring-2.focus:ring-blue-500\n                {:type \"tel\" :id \"phone\" :required true\n                 :value (:phone @form-data)\n                 :on-change #(swap! form-data assoc :phone (-> % .-target .-value))}]]\n\n              [:div.form-group.mb-4\n               [:label.block.text-sm.font-medium.text-gray-700.mb-2 {:for \"class-type\"} \"Tipo de Clase\"]\n               [:select.form-select.w-full.px-3.py-2.border.border-gray-300.rounded-md.focus:outline-none.focus:ring-2.focus:ring-blue-500\n                {:id \"class-type\" :required true\n                 :value (:class-type @form-data)\n                 :on-change #(swap! form-data assoc :class-type (-> % .-target .-value))}\n                [:option {:value \"\"} \"Selecciona una opci\u00f3n\"]\n                [:option {:value \"virtual\"} \"Virtual (Online)\"]\n                [:option {:value \"presencial\"} \"Presencial (Iquique)\"]]]]\n\n             [:div.form-group.mb-4\n              [:label.block.text-sm.font-medium.text-gray-700.mb-2 {:for \"level\"} \"Nivel Educativo\"]\n              [:select.form-select.w-full.px-3.py-2.border.border-gray-300.rounded-md.focus:outline-none.focus:ring-2.focus:ring-blue-500\n               {:id \"level\" :required true\n                :value (:level @form-data)\n                :on-change #(swap! form-data assoc :level (-> % .-target .-value))}\n               [:option {:value \"\"} \"Selecciona tu nivel\"]\n               [:option {:value \"basica\"} \"Educaci\u00f3n B\u00e1sica\"]\n               [:option {:value \"media\"} \"Educaci\u00f3n Media\"]\n               [:option {:value \"psu\"} \"Preparaci\u00f3n PSU/PAES\"]\n               [:option {:value \"universitario\"} \"Universitario\"]]]\n\n             [:div.form-group.mb-6\n              [:label.block.text-sm.font-medium.text-gray-700.mb-2 {:for \"topics\"} \"Temas Espec\u00edficos (opcional)\"]\n              [:textarea.form-textarea.w-full.px-3.py-2.border.border-gray-300.rounded-md.focus:outline-none.focus:ring-2.focus:ring-blue-500\n               {:id \"topics\" :rows 3\n                :placeholder \"Ej: \u00c1lgebra, Geometr\u00eda, C\u00e1lculo...\"\n                :value (:topics @form-data)\n                :on-change #(swap! form-data assoc :topics (-> % .-target .-value))}]]\n\n             [:div.text-center\n              [:button.btn.bg-green-600.text-white.px-8.py-3.rounded-lg.font-semibold.hover:bg-green-700.transition-colors\n               {:type \"submit\" :disabled @form-submitted}\n               (if @form-submitted \"Enviando...\" \"Enviar Solicitud\")]\n              [:button.btn.bg-gray-500.text-white.px-6.py-3.rounded-lg.font-semibold.hover:bg-gray-600.transition-colors.ml-4\n               {:type \"button\" :on-click show-main}\n               \"Volver\"]]]]\n\n           :results\n           [:div.card.bg-white.rounded-lg.shadow-lg.p-6.text-center\n            [:h2.text-2xl.font-bold.text-gray-800.mb-6\n             [:span.mr-2 \"\ud83c\udf89\"] \"Resultados del Test\"]\n            (when @test-score\n              [:div\n               [:div.score.text-6xl.font-bold.text-blue-600.mb-4\n                (str (:correct @test-score) \"/\" (:total @test-score))]\n               [:div.text-2xl.font-semibold.mb-6\n                (str (int (:percentage @test-score)) \"%\")]\n               [:div.recommendation.bg-blue-50.p-4.rounded-lg.mb-6.text-left\n                [:p.text-gray-700 (get-recommendation (:percentage @test-score))]]])\n            [:div.space-x-4\n             [:button.btn.bg-green-600.text-white.px-6.py-3.rounded-lg.font-semibold.hover:bg-green-700.transition-colors\n              {:on-click show-booking}\n              \"Agendar Clase Personalizada\"]\n             [:button.btn.bg-gray-500.text-white.px-6.py-3.rounded-lg.font-semibold.hover:bg-gray-600.transition-colors\n              {:on-click show-main}\n              \"Volver al Inicio\"]]])]))))\n"]}