{"version":3,"sources":["universo/components/login.cljs"],"mappings":";AAIA,uCAAA,vCAAMA;AAAN,AACE,IAAMC,QAAM,gDAAA,hDAACC;IACPC,WAAS,gDAAA,hDAACD;IACVE,UAAQ,gDAAA,hDAACF;IACTG,QAAM,gDAAA,hDAACH;IACPI,UAAQ,gDAAA,hDAACJ;AAJf,AAME;AAAA,AAAA,0FAAA,iFAAA,mFAAA,iDAAA,ugBAAA,mFAAA,sDAAA,2CAAA,7pBAKG,kBAAA,AAAAK,0BAAA,AAAA,mFAAA,mFAAA,AAAAA,iCAAA,jNAAOD,gMACkBA,uBAEzB,kBAAA,AAAAC,wBAAA,AAAA,mFAAA,8EAAA,AAAAA,+BAAA,xMAAOF,yLACgBA,wQAGJ,WAAKK;AAAL,AACE,AAAiBA;;AACjB,8BAAA,9BAACC,sBAAOP;;AACR,4BAAA,5BAACO,sBAAON;;AACR,8BAAA,9BAACM,sBAAOL;;OAEJ,0BAAA,AAAAC,uBAAA,AAAAA,jDAACK,0CAAYX,uBAAOE,jEACpB,iFAAO,WAAKU,nGAOZ;AAPO,AACE,8BAAA,9BAACF,sBAAOP;;AACR,oBAAI,AAASS;AACX,OAACF,sBAAON,MAAM,AAAA,AAAIQ;;AAClB,AACE,8BAAA,9BAACF,sBAAOL;;AACR,mBAAA,ZAACQ,uBAA0B,AAAQ,AAAQD;;UAChD,WAAKE;AAAL,AACE,8BAAA,9BAACJ,sBAAOP;;AACR,mCAAA,5BAACO,sBAAON;;WA5B9C,mFAAA,0EAAA,mFAAA,uDAAA,iBAAA,mFAAA,sDAAA,2CAAA,qDAAA,QAAA,mEAAA,eAAA,sDAAA,AAAAE,uBAAA,+DAAA,WAAAC,jFAmCsBP;AAnCtB,AAoC0B,OAACU,sBAAOV,MAAM,AAAA,AAAAO;GApCxC,6DAAA,KAAA,8DAAA,AAAAD,iDAAA,mFAAA,0EAAA,mFAAA,uDAAA,2BAAA,mFAAA,sDAAA,2CAAA,qDAAA,WAAA,mEAAA,qBAAA,sDAAA,AAAAA,0BAAA,+DAAA,WAAAE,z0BAsCyBL,qvBAOHD;AA7CtB,AA8C0B,OAACQ,sBAAOR,SAAS,AAAA,AAAAM;GA9C3C,6DAAA,KAAA,8DAAA,AAAAF,iDAAA,mFAAA,yDAAA,2CAAA,qDAAA,SAAA,8DAAA,AAAAA,pVAgDyBH,oWAIAA,iBACpB,kBAAA,AAAAG,0BAAA,2BAAA,rCAAKH","names":["universo.components.login/login-form","email","reagent.core.atom","password","loading","error","success","cljs.core/deref","p1__11894#","p1__11895#","e","cljs.core/reset!","universo.supabase/sign-in","response","js/console.log","err"],"sourcesContent":["(ns universo.components.login\n  (:require [reagent.core :as r]\n            [universo.supabase :as sb]))\n\n(defn login-form []\n  (let [email (r/atom \"\")\n        password (r/atom \"\")\n        loading (r/atom false)\n        error (r/atom nil)\n        success (r/atom nil)]\n\n    (fn []\n      [:div.login-container\n       [:h2 \"Iniciar Sesi\u00f3n\"]\n\n       ;; Mensajes de \u00e9xito/error\n       (when @success\n         [:div.success-message @success])\n\n       (when @error\n         [:div.error-message @error])\n\n       ;; Formulario\n       [:form {:on-submit (fn [e]\n                            (.preventDefault e)\n                            (reset! loading true)\n                            (reset! error nil)\n                            (reset! success nil)\n\n                            (-> (sb/sign-in @email @password)\n                                (.then (fn [response]\n                                         (reset! loading false)\n                                         (if (.-error response)\n                                           (reset! error (.. response -error -message))\n                                           (do\n                                             (reset! success \"\u00a1Login exitoso!\")\n                                             (js/console.log \"Usuario:\" (.-user (.-data response)))))))\n                                (.catch (fn [err]\n                                          (reset! loading false)\n                                          (reset! error \"Error de conexi\u00f3n\")))))}\n\n        ;; Campo Email\n        [:div.form-group\n         [:label \"Email:\"]\n         [:input {:type \"email\"\n                  :placeholder \"tu@email.com\"\n                  :value @email\n                  :on-change #(reset! email (.. % -target -value))\n                  :required true\n                  :disabled @loading}]]\n\n        ;; Campo Password\n        [:div.form-group\n         [:label \"Contrase\u00f1a:\"]\n         [:input {:type \"password\"\n                  :placeholder \"Tu contrase\u00f1a\"\n                  :value @password\n                  :on-change #(reset! password (.. % -target -value))\n                  :required true\n                  :disabled @loading}]]\n\n        ;; Bot\u00f3n Submit\n        [:button {:type \"submit\"\n                  :disabled @loading}\n         (if @loading \"Iniciando sesi\u00f3n...\" \"Iniciar Sesi\u00f3n\")]]])))\n"]}